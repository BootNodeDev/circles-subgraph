specVersion: 0.0.3
description: A secure & decentralized way to address resources on and off the blockchain using simple, human-readable names. Access domains and transfer history.
repository: https://github.com/CirclesUBI/circles-subgraph/
schema:
  file: ./schema.graphql
dataSources:
  - kind: ethereum/contract
    name: Hub
    network: ganache
    source:
      address: '0x26A3D107756d162f052a99e02c6b8CC3Ef06797A'
      abi: Hub
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.3
      language: wasm/assemblyscript
      file: ./src/hub.ts
      entities:
        - Token
        - Signup
        - Trust
      abis:
        - name: Hub
          file: ./node_modules/circles-contracts/build/contracts/Hub.json
      eventHandlers:
        - event: Signup(indexed address,address)
          handler: handleSignup
        - event: Trust(indexed address,indexed address,uint256)
          handler: handleTrust
  - kind: ethereum/contract
    name: ProxyFactory
    network: ganache
    source:
      address: '0x26B7ccEeD020739e311D19557F3794d65E3042C6'
      abi: ProxyFactory
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.3
      language: wasm/assemblyscript
      file: ./src/proxyFactory.ts
      entities:
        - ProxyCreation
        - Safe
      abis:
        - name: ProxyFactory
          file: ./node_modules/@gnosis.pm/safe-contracts/build/contracts/ProxyFactory.json
      eventHandlers:
        - event: ProxyCreation(address)
          handler: handleProxyCreation
      callHandlers:
        - function: createProxy(address,bytes)
          handler: handleCreateProxyCall
    templates:
      - name: GnosisSafe
        kind: ethereum/contract
        network: ganache
        source:
          abi: GnosisSafe
        mapping:
          kind: ethereum/events
          apiVersion: 0.0.1
          language: wasm/assemblyscript
          file: ./src/gnosisSafe.ts
          entities:
            - Safe
          abis:
            - name: GnosisSafe
              file: ./node_modules/@gnosis.pm/safe-contracts/build/contracts/GnosisSafe.json
          eventHandlers:
            - event: AddedOwner(address)
              handler: handleAddedOwner